# Руководство по озвучиванию аннотаций

*Это руководство также доступно на других языках:
[English](TTS-GUIDE.md) |
[Francais](TTS-GUIDE-fr.md) |
[Espanol](TTS-GUIDE-es.md) |
[Deutsch](TTS-GUIDE-de.md) |
[日本語](TTS-GUIDE-ja.md) |
Русский |
[中文](TTS-GUIDE-zh.md)*

## Почему TTS меняет подход к изучению шахмат

Когда вы разбираете аннотированную партию, ваши глаза работают за двоих. Вы пытаетесь одновременно следить за фигурами на доске *и* читать комментарии. Взгляд мечется между доской и панелью аннотаций, и каждый раз при переключении вы на мгновение теряете позицию. Приходится заново искать фигуры, заново прослеживать линии, заново выстраивать картину в голове.

TTS полностью решает эту проблему.

С включённым TTS вы перемещаетесь по партии, а аннотации *звучат вслух*. Глаза остаются на доске. Вы видите, как конь встаёт на f3, и голос объясняет, почему это сильный развивающий ход. Вы наблюдаете, как меняется пешечная структура, а комментарий раскрывает стоящую за этим стратегическую идею. Доска и слова приходят одновременно — так, как учил бы тренер, сидящий напротив вас.

Особенно ценно это при:

- **Изучении дебютов** — слушайте идеи каждого хода, наблюдая за развитием позиции
- **Разборе партий** — проходите по собственным аннотированным партиям и естественно усваивайте уроки
- **Отработке эндшпиля** — сосредоточьтесь на ключевых полях, пока комментарий направляет вас
- **Языковом погружении** — изучайте шахматы на французском, немецком, испанском, русском, японском или китайском с корректным переводом всех шахматных терминов. Слушайте «Cavalier f3, echec» вместо «Knight f3, check». Учите шахматы на том языке, на котором думаете.
- **Доступности** — для игроков, которым проще воспринимать на слух, чем читать, или для тех, кто хочет заниматься вдали от рабочего стола

Попробовав один раз, вы почувствуете, что немые аннотации — это как смотреть фильм без звука.

## Выбор провайдера

В этой версии доступны два TTS-провайдера — Google Cloud и ElevenLabs. Если сообщество хочет видеть другого провайдера, дайте нам знать — мы добавим. Для начала достаточно одного провайдера — выбирайте тот, который подходит вам лучше.

|                        | Google Cloud                  | ElevenLabs                    |
|------------------------|-------------------------------|-------------------------------|
| **Бесплатный уровень** | 1 000 000 символов/месяц      | 10 000 символов/месяц         |
| **Качество голоса**    | Очень хорошее (WaveNet)       | Отличное (премиальные AI-голоса) |
| **Выбор голосов**      | Мужской или женский для каждого языка | Десятки уникальных голосов |
| **Платные планы**      | Оплата по факту (копейки)     | От $5/месяц                   |
| **Лучше всего для**    | Большинства пользователей     | Ценителей качества голоса     |
| **Сложность настройки**| Средняя (Cloud Console)       | Простая (быстрая регистрация) |

**Наша рекомендация:** Начните с **Google Cloud**. Бесплатный уровень даёт вам миллион символов в месяц — это сотни полностью аннотированных партий, совершенно бесплатно. Голоса WaveNet звучат отлично. Если позже захотите более богатого, выразительного озвучивания с яркой индивидуальностью голоса, ElevenLabs к вашим услугам.

## Настройка Google Cloud TTS

Весь процесс занимает около 5 минут. Вам понадобится аккаунт Google (подойдёт тот же, который вы используете для Gmail или YouTube).

### Шаг 1: Войдите в Google Cloud Console

1. Откройте браузер и перейдите по адресу **[console.cloud.google.com](https://console.cloud.google.com/)**
2. Войдите в свой аккаунт Google
3. Если вы здесь впервые, Google попросит принять Условия обслуживания. Установите флажок и нажмите **Agree and Continue**

Вы увидите панель управления Google Cloud Console. Она выглядит перегруженной — не беспокойтесь, нам понадобятся всего две вещи.

### Шаг 2: Настройте оплату

Google требует платёжный аккаунт даже для бесплатного уровня. **С вас не спишут деньги**, если вы не превысите 1 миллион символов за месяц (с шахматными аннотациями это практически невозможно). Google заранее предупредит, если вы будете приближаться к лимиту.

1. В верхней строке поиска введите **"Billing"** и нажмите **Billing** в выпадающем меню
2. Нажмите **Link a billing account** (или **Create account**, если у вас ещё нет платёжного аккаунта)
3. Следуйте инструкциям, чтобы добавить кредитную или дебетовую карту
4. По завершении рядом с вашим платёжным аккаунтом появится зелёная галочка

> **Примечание:** Если у вас уже настроена оплата Google Cloud для другого проекта, этот шаг можно пропустить. Существующий платёжный аккаунт подойдёт.

### Шаг 3: Включите Text-to-Speech API

Этот шаг сообщает Google, какой сервис вы хотите использовать.

1. В верхней строке поиска введите **"Text-to-Speech"**
2. В выпадающих результатах нажмите **Cloud Text-to-Speech API** (со значком синего API)
3. Вы окажетесь на странице описания API. Нажмите большую синюю кнопку **Enable**
4. Подождите несколько секунд. Когда кнопка сменится на **Manage**, API включён

### Шаг 4: Создайте API key

API key — это то, что En Croissant использует для связи с серверами Google.

1. В верхней строке поиска введите **"Credentials"** и нажмите **Credentials** в разделе «APIs & Services»
2. В верхней части страницы нажмите **+ Create Credentials**
3. В выпадающем меню выберите **API key**
4. Появится диалоговое окно с вашим новым ключом. Он выглядит примерно так: `AIzaSyC...около 35 символов...`
5. **Нажмите значок копирования** рядом с ключом, чтобы скопировать его в буфер обмена
6. Нажмите **Close**

> **Рекомендуется: Ограничьте свой ключ.** После создания ключ появится на странице Credentials. Нажмите на имя ключа, чтобы открыть его настройки. В разделе **API restrictions** выберите **Restrict key**, затем выберите **Cloud Text-to-Speech API** из выпадающего списка и нажмите **Save**. Так даже при утечке ключа его можно будет использовать только для TTS — и ни для чего другого.

### Шаг 5: Настройте En Croissant

Почти готово!

1. Откройте En Croissant и перейдите в **Settings** (значок шестерёнки) > вкладка **Sound**
2. Прокрутите вниз до раздела TTS
3. Установите **TTS Provider** в значение **Google Cloud**
4. Нажмите на поле **Google Cloud API Key** и вставьте свой ключ (Ctrl+V)
5. Установите **Text-to-Speech** в положение **On**
6. Нажмите кнопку **Test** рядом с выбором голоса

Вы должны услышать произнесённый вслух шахматный ход. Если услышали — поздравляем, всё настроено!

> **Устранение неполадок:** Если при тестировании тишина, проверьте: (1) вы вставили полный API key, (2) Text-to-Speech API включён (шаг 3), (3) оплата привязана (шаг 2). Чаще всего проблема в том, что забыли включить API.

## Настройка ElevenLabs

ElevenLabs настраивается проще, но бесплатный уровень скромнее (10 000 символов/месяц — хватит на несколько партий для пробы).

### Шаг 1: Создайте аккаунт

1. Откройте браузер и перейдите по адресу **[elevenlabs.io](https://elevenlabs.io/)**
2. Нажмите **Sign Up** в правом верхнем углу
3. Можно зарегистрироваться через Google, GitHub или по электронной почте — выбирайте, что удобнее
4. После регистрации вы попадёте на панель управления ElevenLabs

### Шаг 2: Получите API key

1. В левом нижнем углу панели управления нажмите на **значок профиля** (или на своё имя)
2. Нажмите **Profile + API key**
3. Вы увидите раздел с API key. Нажмите **Reveal**, чтобы отобразить ключ, или **Generate**, если ключа ещё нет
4. Ключ выглядит примерно так: `sk_...около 30 символов...`
5. **Нажмите значок копирования**, чтобы скопировать ключ в буфер обмена

### Шаг 3: Настройте En Croissant

1. Откройте En Croissant и перейдите в **Settings** (значок шестерёнки) > вкладка **Sound**
2. Прокрутите вниз до раздела TTS
3. Установите **TTS Provider** в значение **ElevenLabs**
4. Нажмите на поле **ElevenLabs API Key** и вставьте свой ключ (Ctrl+V)
5. В выпадающем списке **TTS Voice** появятся доступные голоса. **Adam** — отличный выбор по умолчанию: чистый, естественный и прекрасно подходит для шахматных комментариев
6. Установите **Text-to-Speech** в положение **On**
7. Нажмите кнопку **Test** рядом с выбором голоса

Вы должны услышать произнесённый вслух шахматный ход.

> **О бесплатном уровне:** ElevenLabs предоставляет 10 000 символов/месяц на бесплатном плане. Типичная аннотированная партия занимает 2 000–4 000 символов, так что бесплатно можно разобрать 2–5 партий в месяц. Если TTS окажется полезным, план Starter за $5/месяц (30 000 символов) — достойное улучшение. План Pro ($22/месяц, 100 000 символов) покрывает интенсивное использование.

## Справочник по настройкам

Все настройки TTS находятся в разделе **Settings > Sound**:

| Настройка                | Что она делает                                                                |
|--------------------------|-------------------------------------------------------------------------------|
| **Text-to-Speech**       | Главный переключатель всех функций TTS                                        |
| **Auto-Narrate on Move** | Автоматически озвучивает аннотации при перемещении по ходам стрелками          |
| **TTS Provider**         | Переключение между ElevenLabs и Google Cloud                                  |
| **ElevenLabs API Key**   | Ваш API key для ElevenLabs (нужен только при использовании ElevenLabs)        |
| **Google Cloud API Key** | Ваш API key для Google Cloud (нужен только при использовании Google)           |
| **TTS Voice**            | ElevenLabs: выбор из доступных голосов. Google: мужской или женский голос      |
| **TTS Language**         | Язык озвучивания — все шахматные термины переводятся автоматически             |
| **TTS Volume**           | Громкость озвучивания                                                         |
| **TTS Speed**            | Скорость воспроизведения (от 0.5x до 2x) — регулируется мгновенно без повторной генерации аудио |
| **TTS Audio Cache**      | Очистка кеша аудио для принудительной повторной генерации (полезно после редактирования аннотаций) |

## Поддерживаемые языки

TTS-озвучивание на данный момент поддерживает семь языков с полным переводом шахматной терминологии:

| Язык               | Шахматный пример                                    |
|--------------------|-----------------------------------------------------|
| **English**        | Knight f3, check. A strong developing move.         |
| **Francais**       | Cavalier f3, echec. Un coup de developpement fort.  |
| **Espanol**        | Caballo f3, jaque. Un fuerte movimiento.            |
| **Deutsch**        | Springer f3, Schach. Ein starker Entwicklungszug.   |
| **日本語**          | ナイト f3、チェック。強い展開の手。                      |
| **Русский**        | Конь f3, шах. Сильный развивающий ход.              |
| **中文**            | 马 f3，将军。一步控制中心的强力出子。                    |

Каждый шахматный термин — названия фигур, «шах», «мат», «рокировка», «берёт», оценки качества хода вроде «Блестящий ход» и «Зевок» — произносится на выбранном языке. Комментарии в ваших PGN-файлах озвучиваются как есть, поэтому аннотируйте партии на том языке, который хотите слышать.

## Советы для лучшего впечатления

- **Используйте автоозвучивание.** Включите «Auto-Narrate on Move» и просто используйте стрелки для перемещения по партии. Комментарии звучат естественно по мере продвижения — как будто тренер стоит за вашим плечом.

- **Аннотируйте собственные партии.** TTS по-настоящему раскрывается, когда вы слушаете комментарии к *своим* партиям. Аннотируйте их, а затем проходите с озвучиванием. Услышать «Пешка выглядит аппетитно, но весь ваш королевский фланг ещё спит», глядя на позицию, — совсем другое дело, чем прочитать тот же текст.

- **Попробуйте разную скорость.** Одни предпочитают 1x для вдумчивого анализа, другие — 1.3x для быстрого просмотра. Ползунок скорости регулирует воспроизведение в реальном времени без дополнительного расхода символов API — аудио генерируется один раз и проигрывается быстрее.

- **Пользуйтесь значком динамика.** У каждого комментария в списке ходов есть маленький значок динамика. Нажмите на него, чтобы прослушать именно эту аннотацию, не проходя всю партию целиком.

- **Переключайте языки для изучения шахматной лексики.** Если вы изучаете шахматы на втором языке, установите соответствующий язык TTS. Вы естественным образом освоите такие слова, как «Cavalier» (конь), «echec» (шах) и «mat» (мат), просто слушая озвучивание.

## Об этой функции

En Croissant — это шахматный инструмент с открытым исходным кодом, созданный [Francisco Salgueiro](https://github.com/franciscoBSalgueiro). Francisco построил нечто по-настоящему особенное — бесплатную, мощную, развиваемую сообществом платформу для изучения шахмат — и выпустил её под лицензией GPL-3.0, чтобы каждый мог ею пользоваться, улучшать и делиться. Эта функция TTS существует благодаря его щедрости. Мы благодарны за созданный им фундамент и гордимся возможностью внести свой вклад.

TTS-плагин разработан Darrell из [Red Shed](mailto:darrell@redshed.ai) с помощью [Claude Code](https://claude.ai/claude-code). Поддержка нескольких языков, интеграция с двумя провайдерами, перевод шахматной терминологии на семь языков — собрано из исходников, протестировано вручную и передано с заботой.

В этом и есть красота открытого кода. Кто-то создаёт нечто великое. Другой дополняет. Выигрывают все.

## Свяжитесь с нами

Мы рады этой функции и будем рады узнать, как она работает для вас. Комментарии, предложения и отзывы всегда приветствуются.

- **Хотите язык, которого ещё нет?** Дайте нам знать — мы можем добавить новые языки быстро.
- **Нашли ошибку?** Сообщите нам, и мы быстро её исправим.
- **Есть идея по другому TTS-провайдеру?** Мы будем рады его добавить.
- **Просто хотите сказать, что всё работает?** Это тоже приятно слышать.

Создайте issue на GitHub или напишите нам напрямую: **[darrell@redshed.ai](mailto:darrell@redshed.ai)**.
